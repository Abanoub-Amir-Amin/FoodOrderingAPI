<!-- Outer Container -->
<div class="outer-container">
  <!-- Inner Container -->
  <div class="inner-container">
    
    <div class="form-section">
        <div class="d-flex justify-content-center align-items-center mb-3 Address-header">
            <h2 class="h5 mb-0 Address-title">
                <i class="fas fa-home text-warning me-2"></i>
                Addresses
            </h2>
            
          

        </div>
          <div *ngIf="ErrorMessage" class="alert alert-error">
      <i class="fas fa-exclamation-triangle"></i>
      {{ ErrorMessage }}
    </div>

    <!-- Success Alert -->
    <div *ngIf="successMessage" class="alert alert-success">
      <i class="fas fa-check-circle"></i>
      {{ successMessage }}
    </div>


        <div class="d-flex flex-column align-items-end gap-3 mb-3">
            <button class="btn btn-orange btn-sm mt-auto text-center " data-bs-toggle="modal" data-bs-target="#addAddressModal">
                <i class="fas fa-plus me-1"></i>
                Add Address
            </button>
        </div>
    <div id="addressList">
        <!-- Default Home Address -->
        <ng-container *ngIf="AddressesView && AddressesView.length > 0">
            <div *ngFor="let item of AddressesView; let i = index " class="address-item" [ngClass]="{'default': item.isDefault}">
                <div class="d-flex justify-content-between align-items-start">
                    <div class="flex-grow-1">
                        <div class="mb-2">
                            <span class="address-label default">{{item.label}}</span>
                            <small *ngIf="item.isDefault" class="text-warning ms-2 fw-medium">Default</small>
                        </div>
                        <p class="mb-0 text-dark">{{item.street}}, {{item.city}}</p>
                    </div>
                    <div class="d-flex gap-2">
                        <button class="btn btn-outline-primary btn-sm" title="View on Map" (click)="viewOnMap(item.label,item.street,item.city,item.latitude,item.longitude)">
                            <i class="fas fa-eye"></i>
                        </button>
                                  <button class="btn btn-outline-danger btn-sm" title="Delete" (click)="DeleteAddress(item.addressID)">
                            <i class="fa-solid fa-trash"></i>
                        </button>
              
                        <button class="btn btn-outline-warning btn-sm" title="Set as Default" (click)="MakeDefault(item.addressID)">
                            <i class="fas fa-map-marker-alt"></i>
                        </button>
                    </div>
                </div>
            </div>
        </ng-container>
    </div>
</div>           
<!-- Add Address Modal -->
    <!-- <div *ngIf="mode==='add'" class="modal fade" id="addAddressModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Address</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Label</label>
                        <input type="text" class="form-control" placeholder="e.g., Home, Work, Office" id="newLabel">
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <label class="form-label">Building No.</label>
                            <input type="text" class="form-control" placeholder="123" id="newNum">
                        </div>
                        <div class="col-6">
                            <label class="form-label">City</label>
                            <input type="text" class="form-control" placeholder="Cairo" id="newCity">
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Street</label>
                        <input type="text" class="form-control" placeholder="Main Street" id="newStreet">
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <label class="form-label">Latitude</label>
                            <input type="number" class="form-control" step="any" value="30.0444" id="newLat">
                        </div>
                        <div class="col-6">
                            <label class="form-label">Longitude</label>
                            <input type="number" class="form-control" step="any" value="31.2357" id="newLng">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-orange" onclick="addAddress()">Add Address</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div> -->
</div>
</div>
    <!-- Map View Modal -->
    <div  class="modal fade" id="mapModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="mapModalTitle">Location</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3 p-3 bg-light rounded">
                        <p class="mb-1"><strong>Address:</strong> <span id="mapAddress">{{selectedAddress.label}} - {{selectedAddress.street}}, {{selectedAddress.city}}</span></p>
                        <p class="mb-0 text-muted small"><strong>Coordinates:</strong> <span id="mapCoords">[{{selectedAddress.latitude}} , {{selectedAddress.longitude}}]</span></p>
                    </div>
              <!-- Location Section -->
        <div class="location-section">
          <h3 class="section-title">
            <i class="fas fa-map-marker-alt"></i>
            Your Location
          </h3>

          <!-- Current Location Display -->
          <div class="current-location">
            <div class="location-info">
              <span class="location-label">Current Location:</span>
              <div class="coordinates">
                <span class="coordinate">{{
                  selectedAddress?.latitude| number : "1.6-6"
                }}</span
                >,
                <span class="coordinate">{{
                  selectedAddress?.longitude| number : "1.6-6"
                }}</span>
              </div>
            </div>
            <button
              type="button"
              class="edit-location-btn"
              [class.active]="isEditingLocation"
              (click)="updateLocationMode()"
            >
              <i
                class="fas"
                [ngClass]="isEditingLocation ? 'fa-save' : 'fa-edit'"
              ></i>
              {{ isEditingLocation ? "Save Location" : "Edit Location" }}
            </button>
          </div>

          <!-- Map Container -->
          <div class="map-wrapper">
            <div id="profileMap" class="map-container"></div>
            <div *ngIf="isEditingLocation" class="map-instructions">
              <i class="fas fa-info-circle"></i>
              Click on map or drag marker to update location
                </div>
              </div>

          <!-- Map Controls -->
                <div class="map-controls">
                    <button
                    type="button"
                    class="current-location-btn"
                    (click)="getCurrentLocation()"
                    >
                    <i class="fas fa-crosshairs"></i>
                    Use Current Location
                    </button>
                </div>

                <!-- Hidden coordinate inputs -->
                </div>
            </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-orange" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
